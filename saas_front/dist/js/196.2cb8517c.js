(self["webpackChunksell_manage"]=self["webpackChunksell_manage"]||[]).push([[196],{7196:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return m}});var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"auto",width:"auto"}},[e("el-card",[e("div",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:23}},[e("el-form",{staticStyle:{"margin-top":"20px"},attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"员工编号"}},[e("el-input",{attrs:{placeholder:"请输入员工编号"},model:{value:t.adminId,callback:function(e){t.adminId=e},expression:"adminId"}})],1),e("el-form-item",{attrs:{label:"员工电话"}},[e("el-input",{attrs:{placeholder:"请输入员工电话"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),e("el-form-item",[e("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.search()}}},[t._v("搜索")])],1),e("el-button",{attrs:{type:"primary"},on:{click:t.addOpen}},[e("i",{staticClass:"el-icon-circle-plus-outline el-icon--left"}),t._v("新增员工工资信息 ")])],1)],1),e("el-col",{attrs:{span:1}},[e("el-popover",{attrs:{placement:"top-start",title:"工资与保险的介绍",width:"200",trigger:"hover",content:"实际工资=基本工资\n                    +奖金+津贴-扣款-个人所得税-五险一金"}},[e("i",{staticClass:"el-icon-info",staticStyle:{"font-size":"24px","margin-top":"25px"},attrs:{slot:"reference"},slot:"reference"})])],1)],1)],1)]),e("el-card",{staticStyle:{"margin-top":"20px"}},[e("el-card",[e("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v("社保公积金")])]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[e("el-table-column",{attrs:{prop:"name",label:"姓名",width:"70",align:"center",fixed:"left"}}),e("el-table-column",{attrs:{prop:"phone",label:"电话 ",align:"center"}}),e("el-table-column",{attrs:{prop:"sc",label:"公司社保公积金",align:"center"}}),e("el-table-column",{attrs:{prop:"sp",label:"个人社保公积金",align:"center"}}),e("el-table-column",{attrs:{prop:"created",label:"发放日期",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",[e("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(a.created)+" ")])]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"详情",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-info",circle:""},on:{click:function(e){return t.update(a)}}})]}}])})],1),e("el-pagination",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pagesize},on:{"current-change":t.pagechange}})],1),e("el-dialog",{staticStyle:{"font-size":"24px"},attrs:{title:"新增",visible:t.addFormVisible,width:"700px"},on:{"update:visible":function(e){t.addFormVisible=e}}},[e("el-form",{staticClass:"demo-form-inline",attrs:{model:t.userFormData,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"员工编号"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"员工编号","controls-position":"right"},model:{value:t.userFormData.adminId,callback:function(e){t.$set(t.userFormData,"adminId",e)},expression:"userFormData.adminId"}})],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"基本工资"}},[e("el-input-number",{attrs:{placeholder:"基本工资","controls-position":"right",size:"medium"},model:{value:t.userFormData.basicSalary,callback:function(e){t.$set(t.userFormData,"basicSalary",e)},expression:"userFormData.basicSalary"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"奖金"}},[e("el-input-number",{attrs:{placeholder:"奖金","controls-position":"right",size:"medium"},model:{value:t.userFormData.bonus,callback:function(e){t.$set(t.userFormData,"bonus",e)},expression:"userFormData.bonus"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"津贴"}},[e("el-input-number",{attrs:{placeholder:"津贴","controls-position":"right",size:"medium"},model:{value:t.userFormData.allowance,callback:function(e){t.$set(t.userFormData,"allowance",e)},expression:"userFormData.allowance"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"扣款"}},[e("el-input-number",{attrs:{placeholder:"扣款","controls-position":"right",size:"medium"},model:{value:t.userFormData.deduction,callback:function(e){t.$set(t.userFormData,"deduction",e)},expression:"userFormData.deduction"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"扣款原因"}},[e("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"扣款原因","controls-position":"right"},model:{value:t.userFormData.deductionDescription,callback:function(e){t.$set(t.userFormData,"deductionDescription",e)},expression:"userFormData.deductionDescription"}})],1)],1)],1),e("el-form-item",[e("el-button",{staticStyle:{width:"180px","margin-left":"110px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交"),e("i",{staticClass:"el-icon-success el-icon--right"})])],1)],1)],1),e("el-dialog",{staticStyle:{"font-size":"24px"},attrs:{title:"详情",visible:t.detailFormVisible,width:"700px"},on:{"update:visible":function(e){t.detailFormVisible=e}}},[e("el-card",{staticStyle:{"margin-top":"20px"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.accumulation,border:""}},[e("el-table-column",{attrs:{prop:"paymentProject",label:"社保",align:"center"}}),e("el-table-column",{attrs:{prop:"companyMoney",label:"公司承担金额",align:"center"}}),e("el-table-column",{attrs:{prop:"personalMoney",label:"个人承担金额",align:"center"}})],1)],1)],1)],1)},n=[],s=(a(70560),a(91076)),i=a(55743),o=a.n(i),l=a(8499),c={data(){return{text:"付",summary:"工资",salaryID:"",list:[],accumulation:[],pageno:1,pagesize:5,total:0,bookID:"",adminId:"",time1:"",time2:"",phone:"",userFormData:{adminId:0,basicSalary:0,allowance:0,bonus:0,subsidy:0,deduction:0,deductionDescription:""},employeeID:"",actionType:"",salaryID:"",addFormVisible:!1,detailFormVisible:!1,employeeList:[],selectedEmployee:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},value1:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value2:""}},created(){this.bookID=localStorage.getItem("bookID"),this.getList()},methods:{async updateApprovalStatus(t){console.log(t);const e={salaryId:t.salaryId,isToVoucher:"是"};await(0,s.Z)({url:"http://localhost:8080/salary/update",method:"post",data:e});localStorage.setItem("summary",this.summary),localStorage.setItem("debitAmount",t.actualSalary),localStorage.setItem("text",this.text),l.Message.success("即将进入凭证界面"),setTimeout((()=>{this.$router.push("/voucher/Voucher?type=1")}),1e3)},async getList(){const t=await(0,s.Z)({method:"get",url:"http://localhost:8081/accumulate/list",params:{page:this.pageno,limit:this.pagesize,bookID:this.bookID,adminId:this.adminId,time1:this.value2[0],time2:this.value2[1],phone:this.phone}});this.list=t.data.data.map((t=>({...t,created:o()(t.created).format("YYYY-MM-DD HH:mm:ss")}))),this.total=t.data.count},search(){this.getList()},pagechange(t){this.pageno=t,this.getList()},addOpen(){this.addFormVisible=!0,this.actionType="add",this.userFormData={baseSalary:0,allowance:0,bonus:0,subsidy:0,deduction:0,personalIncomeTax:0,insurance:440,actualSalary:0},this.employeeID=this.selectedEmployee,this.selectedEmployee=""},async getAccumulationList(t){const e=await(0,s.Z)({method:"get",url:"http://localhost:8081/accumulate/detail",params:{id:t.id}});this.accumulation=e.data.data},update(t){console.log(t),this.getAccumulationList(t),setTimeout(console.log("延迟1s"),1e3),this.detailFormVisible=!0},calculatePersonalIncomeTax(){const{baseSalary:t,allowance:e,bonus:a,subsidy:r,deduction:n,insurance:s}=this.userFormData,i=t+e+a+r-n,o=i-5e3;o>0&&o<=5e3?this.userFormData.personalIncomeTax=0*o:o>5e3&&o<=8e3?this.userFormData.personalIncomeTax=.03*o:o>8e3&&o<=17e3?this.userFormData.personalIncomeTax=parseFloat((.1*o).toFixed(2)):o>17e3&&(this.userFormData.personalIncomeTax=.2*o);const l=i-this.userFormData.personalIncomeTax-s;this.userFormData.actualSalary=l},async deleteSalary(t){const e={salaryID:t};await(0,s.Z)({url:"/deleteSalary",method:"post",data:e});this.getList()},async submit(){const t={...this.userFormData,bookID:this.bookID};t.employeeID=this.selectedEmployee,"edit"===this.actionType&&(t.salaryID=this.salaryID);const e=await(0,s.Z)({url:"http://localhost:8081/salary/add",method:"post",data:t});0==e.data.code&&(this.addFormVisible=!1,this.getList()),20020==e.data.code&&this.$message.error("该员工不存在")}},watch:{userFormData:{handler(){this.calculatePersonalIncomeTax()},deep:!0}}},u=c,d=a(1001),h=(0,d.Z)(u,r,n,!1,null,"59cda034",null),m=h.exports},55743:function(t){!function(e,a){t.exports=a()}(0,(function(){"use strict";var t=1e3,e=6e4,a=36e5,r="millisecond",n="second",s="minute",i="hour",o="day",l="week",c="month",u="quarter",d="year",h="date",m="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],a=t%100;return"["+t+(e[(a-20)%10]||e[a]||e[0])+"]"}},g=function(t,e,a){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(a)+t},b={s:g,z:function(t){var e=-t.utcOffset(),a=Math.abs(e),r=Math.floor(a/60),n=a%60;return(e<=0?"+":"-")+g(r,2,"0")+":"+g(n,2,"0")},m:function t(e,a){if(e.date()<a.date())return-t(a,e);var r=12*(a.year()-e.year())+(a.month()-e.month()),n=e.clone().add(r,c),s=a-n<0,i=e.clone().add(r+(s?-1:1),c);return+(-(r+(a-n)/(s?n-i:i-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:d,w:l,d:o,D:h,h:i,m:s,s:n,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},D="en",$={};$[D]=y;var v="$isDayjsObject",w=function(t){return t instanceof M||!(!t||!t[v])},S=function t(e,a,r){var n;if(!e)return D;if("string"==typeof e){var s=e.toLowerCase();$[s]&&(n=s),a&&($[s]=a,n=s);var i=e.split("-");if(!n&&i.length>1)return t(i[0])}else{var o=e.name;$[o]=e,n=o}return!r&&n&&(D=n),n||!r&&D},x=function(t,e){if(w(t))return t.clone();var a="object"==typeof e?e:{};return a.date=t,a.args=arguments,new M(a)},k=b;k.l=S,k.i=w,k.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function y(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[v]=!0}var g=y.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,a=t.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var n=r[2]-1||0,s=(r[7]||"0").substring(0,3);return a?new Date(Date.UTC(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return k},g.isValid=function(){return!(this.$d.toString()===m)},g.isSame=function(t,e){var a=x(t);return this.startOf(e)<=a&&a<=this.endOf(e)},g.isAfter=function(t,e){return x(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<x(t)},g.$g=function(t,e,a){return k.u(t)?this[e]:this.set(a,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var a=this,r=!!k.u(e)||e,u=k.p(t),m=function(t,e){var n=k.w(a.$u?Date.UTC(a.$y,e,t):new Date(a.$y,e,t),a);return r?n:n.endOf(o)},p=function(t,e){return k.w(a.toDate()[t].apply(a.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),a)},f=this.$W,y=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case d:return r?m(1,0):m(31,11);case c:return r?m(1,y):m(0,y+1);case l:var D=this.$locale().weekStart||0,$=(f<D?f+7:f)-D;return m(r?g-$:g+(6-$),y);case o:case h:return p(b+"Hours",0);case i:return p(b+"Minutes",1);case s:return p(b+"Seconds",2);case n:return p(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var a,l=k.p(t),u="set"+(this.$u?"UTC":""),m=(a={},a[o]=u+"Date",a[h]=u+"Date",a[c]=u+"Month",a[d]=u+"FullYear",a[i]=u+"Hours",a[s]=u+"Minutes",a[n]=u+"Seconds",a[r]=u+"Milliseconds",a)[l],p=l===o?this.$D+(e-this.$W):e;if(l===c||l===d){var f=this.clone().set(h,1);f.$d[m](p),f.init(),this.$d=f.set(h,Math.min(this.$D,f.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[k.p(t)]()},g.add=function(r,u){var h,m=this;r=Number(r);var p=k.p(u),f=function(t){var e=x(m);return k.w(e.date(e.date()+Math.round(t*r)),m)};if(p===c)return this.set(c,this.$M+r);if(p===d)return this.set(d,this.$y+r);if(p===o)return f(1);if(p===l)return f(7);var y=(h={},h[s]=e,h[i]=a,h[n]=t,h)[p]||1,g=this.$d.getTime()+r*y;return k.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,a=this.$locale();if(!this.isValid())return a.invalidDate||m;var r=t||"YYYY-MM-DDTHH:mm:ssZ",n=k.z(this),s=this.$H,i=this.$m,o=this.$M,l=a.weekdays,c=a.months,u=a.meridiem,d=function(t,a,n,s){return t&&(t[a]||t(e,r))||n[a].slice(0,s)},h=function(t){return k.s(s%12||12,t,"0")},p=u||function(t,e,a){var r=t<12?"AM":"PM";return a?r.toLowerCase():r};return r.replace(f,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return k.s(e.$y,4,"0");case"M":return o+1;case"MM":return k.s(o+1,2,"0");case"MMM":return d(a.monthsShort,o,c,3);case"MMMM":return d(c,o);case"D":return e.$D;case"DD":return k.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return d(a.weekdaysMin,e.$W,l,2);case"ddd":return d(a.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(s);case"HH":return k.s(s,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return p(s,i,!0);case"A":return p(s,i,!1);case"m":return String(i);case"mm":return k.s(i,2,"0");case"s":return String(e.$s);case"ss":return k.s(e.$s,2,"0");case"SSS":return k.s(e.$ms,3,"0");case"Z":return n}return null}(t)||n.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,h,m){var p,f=this,y=k.p(h),g=x(r),b=(g.utcOffset()-this.utcOffset())*e,D=this-g,$=function(){return k.m(f,g)};switch(y){case d:p=$()/12;break;case c:p=$();break;case u:p=$()/3;break;case l:p=(D-b)/6048e5;break;case o:p=(D-b)/864e5;break;case i:p=D/a;break;case s:p=D/e;break;case n:p=D/t;break;default:p=D}return m?p:k.a(p)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return $[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var a=this.clone(),r=S(t,e,!0);return r&&(a.$L=r),a},g.clone=function(){return k.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},y}(),F=M.prototype;return x.prototype=F,[["$ms",r],["$s",n],["$m",s],["$H",i],["$W",o],["$M",c],["$y",d],["$D",h]].forEach((function(t){F[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,M,x),t.$i=!0),x},x.locale=S,x.isDayjs=w,x.unix=function(t){return x(1e3*t)},x.en=$[D],x.Ls=$,x.p={},x}))}}]);
//# sourceMappingURL=196.2cb8517c.js.map