"use strict";(self["webpackChunksell_manage"]=self["webpackChunksell_manage"]||[]).push([[386],{24386:function(e,a,t){t.r(a),t.d(a,{default:function(){return u}});var s=function(){var e=this,a=e._self._c;return a("el-card",[a("el-card",{staticStyle:{"margin-top":"20px"}},[a("el-card",[a("span",{staticStyle:{"font-size":"16px","font-weight":"bold","font-family":"'Times New Roman', Times, serif"}},[e._v("个人信息")])]),a("div",{staticClass:"container"},[a("div",{staticClass:"left",staticStyle:{"margin-top":"20px",height:"500px",width:"100%"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:this.uploadUrl,"show-file-list":!0,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{staticClass:"right",staticStyle:{"margin-top":"20px",height:"500px",width:"100%"}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.userFormData,"label-width":"100px","status-icon":"",rules:e.rules}},[a("el-form-item",{attrs:{label:"员工姓名"}},[a("el-input",{attrs:{placeholder:"员工姓名"},model:{value:e.userFormData.employeeDes,callback:function(a){e.$set(e.userFormData,"employeeDes",a)},expression:"userFormData.employeeDes"}})],1),a("el-form-item",{attrs:{label:"性别"}},[[a("el-radio",{attrs:{label:"男"},model:{value:e.userFormData.sex,callback:function(a){e.$set(e.userFormData,"sex",a)},expression:"userFormData.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:e.userFormData.sex,callback:function(a){e.$set(e.userFormData,"sex",a)},expression:"userFormData.sex"}},[e._v("女")])]],2),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userFormData.password,callback:function(a){e.$set(e.userFormData,"password",a)},expression:"userFormData.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userFormData.checkPass,callback:function(a){e.$set(e.userFormData,"checkPass",a)},expression:"userFormData.checkPass"}})],1),a("el-form-item",{attrs:{prop:"phone",label:"手机号",rules:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:["blur","change"]}]}},[a("el-input",{model:{value:e.userFormData.phone,callback:function(a){e.$set(e.userFormData,"phone",a)},expression:"userFormData.phone"}})],1),a("el-form-item",{attrs:{prop:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[a("el-input",{model:{value:e.userFormData.email,callback:function(a){e.$set(e.userFormData,"email",a)},expression:"userFormData.email"}})],1),a("el-form-item",{attrs:{label:"银行卡号"}},[a("el-input",{attrs:{placeholder:"银行卡号"},model:{value:e.userFormData.bankcardID,callback:function(a){e.$set(e.userFormData,"bankcardID",a)},expression:"userFormData.bankcardID"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"}},[a("el-button",{on:{click:e.submit}},[e._v("修改个人信息")])],1)],1)],1)])],1)],1)},r=[],l=(t(98858),t(61318),t(33228),t(91076)),o={data(){var e=(e,a,t)=>{""===a?t(new Error("请输入密码")):(""!==this.userFormData.checkPass&&this.$refs.ruleForm.validateField("checkPass"),t())},a=(e,a,t)=>{""===a?t(new Error("请再次输入密码")):a!==this.userFormData.password?t(new Error("两次输入密码不一致!")):t()};return{uploadUrl:"",imageUrl:"",list:[],employeeID:localStorage.getItem("employeeID"),dialogFormVisible:!1,userFormData:{employeeID:localStorage.getItem("employeeID"),employeeDes:"",sex:"",password:"",checkPass:"",phone:"",email:"",bankcardID:"",createTime:localStorage.getItem("createTime"),state:localStorage.getItem("state"),storeID:localStorage.getItem("storeID"),roleID:localStorage.getItem("roleID"),imageUrl:localStorage.getItem("imgUrl"),accountBook:{bookID:localStorage.getItem("bookID")}},rules:{password:[{validator:e,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}]}}},created(){this.getList(),this.employeeID},mounted(){this.uploadUrl=`http://localhost:8080/employee/uploadEmployeeImg?employeeID=${this.employeeID}`},methods:{async getList(){const e=await(0,l.Z)({method:"get",url:"http://localhost:8080/employee/findByEmployeeID",params:{employeeID:this.userFormData.employeeID}});this.userFormData.employeeDes=e.data.data.employeeDes,this.userFormData.sex=e.data.data.sex,this.userFormData.phone=e.data.data.phone,this.userFormData.email=e.data.data.email,this.userFormData.bankcardID=e.data.data.bankcardID,this.imageUrl=e.data.data.imgUrl,console.log(this.imageUrl)},handleAvatarSuccess(e,a){this.imageUrl=URL.createObjectURL(a.raw)},beforeAvatarUpload(e){const a="image/jpeg"===e.type||"image/png"===e.type,t=e.size/1024/1024<200;return a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),t||this.$message.error("上传头像图片大小不能超过 200MB!"),a&&t},async submit(){const e={...this.userFormData},a=await(0,l.Z)({url:"http://localhost:8080/employee/updateEmployee",method:"post",data:e});console.log(a.data.code),200===a.data.code?this.$message({message:"修改成功",type:"success"}):this.$message.error("修改失败")}}},i=o,m=t(1001),c=(0,m.Z)(i,s,r,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=386.d81e0c21.js.map