(self["webpackChunksell_manage"]=self["webpackChunksell_manage"]||[]).push([[84],{11084:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("el-card",[e("span",{staticStyle:{"font-size":"18px","font-weight":"bold","font-family":"'Times New Roman', Times, serif"}},[t._v("用户报销")]),e("el-popover",{attrs:{placement:"top-start",title:"报销功能介绍",width:"600",trigger:"hover"}},[e("el-card",[e("span",[t._v("摘要通过简要的文字描述,迅速明确交易内容，记录与该笔交易相关的业务事项")]),e("br"),e("span",[t._v("在后续的财务核对和审计中，摘要是查找和理解交易内容的重要依据之一。")]),e("br"),e("span",[t._v("清晰的摘要有助于提高财务数据的可读性和准确性。")]),e("br")]),e("i",{staticClass:"el-icon-info",staticStyle:{"font-size":"16px","margin-left":"10px","margin-top":"5px"},attrs:{slot:"reference"},slot:"reference"})],1)],1),e("el-card",[e("div",[e("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("el-form",{attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"该账套所有的报销类别"}},[e("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择报销类别"},model:{value:t.params.category,callback:function(e){t.$set(t.params,"category",e)},expression:"params.category"}},t._l(t.categoryList,(function(t,a){return e("el-option",{attrs:{label:t.category,value:t.category}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addopen}},[t._v("新增报销")])],1)],1)],1)],1),e("el-table",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:t.list,"header-row-class-name":t.tableHeaderClassName}},[e("el-table-column",{attrs:{prop:"reimbursementId",label:"编号",align:"center"}}),e("el-table-column",{attrs:{prop:"amount",label:"报销金额",align:"center"}}),e("el-table-column",{attrs:{prop:"category",label:"报销类别",align:"center"}}),e("el-table-column",{attrs:{prop:"reason",label:"报销事由",align:"center"}}),e("el-table-column",{attrs:{prop:"approvalStatus",label:"审核状态",align:"center"}}),e("el-table-column",{attrs:{prop:"remarks",label:"备注",align:"center"}}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return["未通过"===a.approvalStatus?e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",disabled:"待审核"!==a.approvalStatus},on:{click:function(e){return t.update(a)}}}):t._e()]}}])})],1),e("el-pagination",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pagesize},on:{"current-change":t.pagechange}})],1),e("el-dialog",{attrs:{title:"修改报销记录",visible:t.show,width:"900px"},on:{"update:visible":function(e){t.show=e}}},[e("el-card",[e("div",{staticStyle:{"font-size":"24px","text-align":"center","margin-top":"15px","font-family":"STKaiti","font-weight":"bold"}},[t._v(" 费用报销单 ")]),e("div",{staticClass:"charge-header",staticStyle:{"margin-top":"15px"}},[e("div",{staticStyle:{"font-size":"16px","margin-top":"8px"}},[t._v(" 申请人: "+t._s(t.name)+" ")]),e("div",{staticStyle:{"font-size":"16px","margin-left":"15px"}},[t._v(" 日期: "+t._s(t.userFormData.date)+" ")]),e("div",{staticStyle:{float:"right"}},[e("el-button",{staticStyle:{"margin-right":"0px"},attrs:{type:"primary",size:"medium"},on:{click:t.submit}},[t._v("保存")])],1)]),e("el-form",{staticClass:"demo-form-inline",attrs:{model:t.userFormData}},[e("el-form-item",{staticStyle:{"margin-top":"30px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center !important"},attrs:{disabled:""},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.amount,callback:function(e){t.$set(t.userFormData,"amount",e)},expression:"userFormData.amount"}})],1)]),e("el-form-item",{staticStyle:{"margin-top":"-23px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center"},attrs:{disabled:""},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.category,callback:function(e){t.$set(t.userFormData,"category",e)},expression:"userFormData.category"}})],1)]),e("el-form-item",{staticStyle:{"margin-top":"-23px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center"},attrs:{disabled:""},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.reason,callback:function(e){t.$set(t.userFormData,"reason",e)},expression:"userFormData.reason"}})],1)]),e("el-form-item",{staticStyle:{"margin-top":"-23px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center"},attrs:{disabled:""},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.remarks,callback:function(e){t.$set(t.userFormData,"remarks",e)},expression:"userFormData.remarks"}})],1)])],1)],1)],1),e("el-dialog",{attrs:{title:"新增报销记录",visible:t.addshow,width:"900px"},on:{"update:visible":function(e){t.addshow=e}}},[e("el-card",[e("div",{staticStyle:{"font-size":"24px","text-align":"center","margin-top":"15px","font-family":"STKaiti","font-weight":"bold"}},[t._v(" 费用报销单 ")]),e("div",{staticClass:"charge-header",staticStyle:{"margin-top":"15px"}},[e("div",{staticStyle:{"font-size":"16px","margin-top":"8px"}},[t._v(" 申请人: "+t._s(t.name)+" ")]),e("div",{staticStyle:{"font-size":"16px","margin-left":"15px"}},[t._v(" 日期: "+t._s(t.userFormData.date)+" ")]),e("div",{staticStyle:{float:"right"}},[e("el-button",{staticStyle:{"margin-right":"0px"},attrs:{type:"primary",size:"medium"},on:{click:t.addsubmit}},[t._v("保存")])],1)]),e("el-form",{staticClass:"demo-form-inline",attrs:{model:t.userFormData}},[e("el-form-item",{staticStyle:{"margin-top":"30px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center !important"},attrs:{disabled:""},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.amount,callback:function(e){t.$set(t.userFormData,"amount",e)},expression:"userFormData.amount"}})],1)]),e("el-form-item",{staticStyle:{"margin-top":"-23px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center"},attrs:{disabled:""},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.category,callback:function(e){t.$set(t.userFormData,"category",e)},expression:"userFormData.category"}})],1)]),e("el-form-item",{staticStyle:{"margin-top":"-23px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center"},attrs:{disabled:""},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.reason,callback:function(e){t.$set(t.userFormData,"reason",e)},expression:"userFormData.reason"}})],1)]),e("el-form-item",{staticStyle:{"margin-top":"-23px"}},[e("div",{staticClass:"flex-container"},[e("el-input",{staticStyle:{flex:"2","text-align":"center"},attrs:{disabled:""},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),e("el-input",{staticStyle:{flex:"8"},model:{value:t.userFormData.remarks,callback:function(e){t.$set(t.userFormData,"remarks",e)},expression:"userFormData.remarks"}})],1)])],1)],1)],1),e("el-dialog",{attrs:{title:"折旧流程",visible:t.isShow},on:{"update:visible":function(e){t.isShow=e}}},[e("div",{staticClass:"block"},[e("el-timeline",[e("el-timeline-item",{attrs:{timestamp:t.DeclarationDate,placement:"top"}},[e("el-card",[e("p",[t._v("员工 "+t._s(t.name)+" 提交申请于 "+t._s(t.DeclarationDate))])])],1),"待审核"!=t.curState?e("el-timeline-item",{attrs:{timestamp:t.ReviewDate,placement:"top"}},[e("el-card",[e("p",[t._v("老板 审核申请于 "+t._s(t.ReviewDate))])])],1):t._e()],1)],1)])],1)],1)},s=[],i=a(91076),n=a(55743),o=a.n(n),l=(a(8499),{data(){return{curState:"",isShow:!1,DeclarationDate:"",ReviewDate:"",count:"报销金额",style:"报销类别",reason:"报销事由",note:"备注",tableHeaderClassName:"custom-table-header",list:[],categoryList:"",userFormData:{date:o()().format("YYYY-MM-DD "),amount:"",category:"",reason:"",remarks:"",reimbursementId:""},pageno:1,pagesize:4,total:0,bookId:6,employeeId:0,params:{category:""},show:!1,addshow:!1}},created(){this.employeeId=localStorage.getItem("employeeID"),this.bookID=localStorage.getItem("bookID"),this.getCategoryList(),this.getList()},methods:{process(t){this.isShow=!0,this.DeclarationDate=t.createTime,this.ReviewDate=t.updateTime,this.curState=t.approvalStatus},async getCategoryList(){const t=await(0,i.Z)({url:"http://localhost:8080/reimbursement/findAllCategoryList",method:"get",params:{bookId:this.bookId}});this.categoryList=t.data.data},async getList(){const t={...this.params},e=await(0,i.Z)({url:"http://localhost:8080/reimbursement/findAll",method:"get",params:{pageno:this.pageno,pagesize:this.pagesize,bookId:this.bookId,employeeId:this.employeeId,...t}});this.list=e.data.data.map((t=>({...t,createTime:o()(t.createTime).format("YYYY-MM-DD "),updateTime:o()(t.updateTime).format("YYYY-MM-DD ")}))),this.total=e.data.count},search(){this.getList()},pagechange(t){this.pageno=t,this.getList()},update(t){console.log(t),this.show=!0,this.userFormData.amount=t.amount,this.userFormData.category=t.category,this.userFormData.reason=t.reason,this.userFormData.remarks=t.remarks,this.userFormData.reimbursementId=t.reimbursementId},async submit(){const t={amount:this.userFormData.amount,category:this.userFormData.category,reason:this.userFormData.reason,remarks:this.userFormData.remarks,reimbursementId:this.userFormData.reimbursementId,updateTime:new Date};console.log(t);const e=await(0,i.Z)({url:"http://localhost:8080/reimbursement/updateReimbursement",method:"post",data:t});200==e.code&&this.$notify({title:"成功",message:"修改成功",type:"success"}),this.getList(),this.show=!1},cancel(){this.show=!1,this.addshow=!1},async addsubmit(){const t={...this.userFormData,createTime:o()().format("YYYY-MM-DD HH:mm:ss"),employeeId:this.employeeId,bookId:this.bookId},e=await(0,i.Z)({url:"http://localhost:8080/reimbursement/add",method:"post",data:t});200==e.code&&this.$notify({title:"成功",message:"添加成功",type:"success"}),this.getList(),this.addshow=!1},addopen(){this.addshow=!0,this.userFormData.amount="",this.userFormData.category="",this.userFormData.reason="",this.userFormData.remarks=""}}}),c=l,u=a(1001),m=(0,u.Z)(c,r,s,!1,null,"ba8e1eda",null),d=m.exports},55743:function(t){!function(e,a){t.exports=a()}(0,(function(){"use strict";var t=1e3,e=6e4,a=36e5,r="millisecond",s="second",i="minute",n="hour",o="day",l="week",c="month",u="quarter",m="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],a=t%100;return"["+t+(e[(a-20)%10]||e[a]||e[0])+"]"}},y=function(t,e,a){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(a)+t},b={s:y,z:function(t){var e=-t.utcOffset(),a=Math.abs(e),r=Math.floor(a/60),s=a%60;return(e<=0?"+":"-")+y(r,2,"0")+":"+y(s,2,"0")},m:function t(e,a){if(e.date()<a.date())return-t(a,e);var r=12*(a.year()-e.year())+(a.month()-e.month()),s=e.clone().add(r,c),i=a-s<0,n=e.clone().add(r+(i?-1:1),c);return+(-(r+(a-s)/(i?s-n:n-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:m,w:l,d:o,D:d,h:n,m:i,s:s,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",D={};D[v]=g;var x="$isDayjsObject",$=function(t){return t instanceof M||!(!t||!t[x])},S=function t(e,a,r){var s;if(!e)return v;if("string"==typeof e){var i=e.toLowerCase();D[i]&&(s=i),a&&(D[i]=a,s=i);var n=e.split("-");if(!s&&n.length>1)return t(n[0])}else{var o=e.name;D[o]=e,s=o}return!r&&s&&(v=s),s||!r&&v},w=function(t,e){if($(t))return t.clone();var a="object"==typeof e?e:{};return a.date=t,a.args=arguments,new M(a)},k=b;k.l=S,k.i=$,k.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function g(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[x]=!0}var y=g.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,a=t.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return a?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return k},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(t,e){var a=w(t);return this.startOf(e)<=a&&a<=this.endOf(e)},y.isAfter=function(t,e){return w(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<w(t)},y.$g=function(t,e,a){return k.u(t)?this[e]:this.set(a,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var a=this,r=!!k.u(e)||e,u=k.p(t),f=function(t,e){var s=k.w(a.$u?Date.UTC(a.$y,e,t):new Date(a.$y,e,t),a);return r?s:s.endOf(o)},p=function(t,e){return k.w(a.toDate()[t].apply(a.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),a)},h=this.$W,g=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case m:return r?f(1,0):f(31,11);case c:return r?f(1,g):f(0,g+1);case l:var v=this.$locale().weekStart||0,D=(h<v?h+7:h)-v;return f(r?y-D:y+(6-D),g);case o:case d:return p(b+"Hours",0);case n:return p(b+"Minutes",1);case i:return p(b+"Seconds",2);case s:return p(b+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var a,l=k.p(t),u="set"+(this.$u?"UTC":""),f=(a={},a[o]=u+"Date",a[d]=u+"Date",a[c]=u+"Month",a[m]=u+"FullYear",a[n]=u+"Hours",a[i]=u+"Minutes",a[s]=u+"Seconds",a[r]=u+"Milliseconds",a)[l],p=l===o?this.$D+(e-this.$W):e;if(l===c||l===m){var h=this.clone().set(d,1);h.$d[f](p),h.init(),this.$d=h.set(d,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[k.p(t)]()},y.add=function(r,u){var d,f=this;r=Number(r);var p=k.p(u),h=function(t){var e=w(f);return k.w(e.date(e.date()+Math.round(t*r)),f)};if(p===c)return this.set(c,this.$M+r);if(p===m)return this.set(m,this.$y+r);if(p===o)return h(1);if(p===l)return h(7);var g=(d={},d[i]=e,d[n]=a,d[s]=t,d)[p]||1,y=this.$d.getTime()+r*g;return k.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,a=this.$locale();if(!this.isValid())return a.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",s=k.z(this),i=this.$H,n=this.$m,o=this.$M,l=a.weekdays,c=a.months,u=a.meridiem,m=function(t,a,s,i){return t&&(t[a]||t(e,r))||s[a].slice(0,i)},d=function(t){return k.s(i%12||12,t,"0")},p=u||function(t,e,a){var r=t<12?"AM":"PM";return a?r.toLowerCase():r};return r.replace(h,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return k.s(e.$y,4,"0");case"M":return o+1;case"MM":return k.s(o+1,2,"0");case"MMM":return m(a.monthsShort,o,c,3);case"MMMM":return m(c,o);case"D":return e.$D;case"DD":return k.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return m(a.weekdaysMin,e.$W,l,2);case"ddd":return m(a.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(i);case"HH":return k.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(i,n,!0);case"A":return p(i,n,!1);case"m":return String(n);case"mm":return k.s(n,2,"0");case"s":return String(e.$s);case"ss":return k.s(e.$s,2,"0");case"SSS":return k.s(e.$ms,3,"0");case"Z":return s}return null}(t)||s.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,f){var p,h=this,g=k.p(d),y=w(r),b=(y.utcOffset()-this.utcOffset())*e,v=this-y,D=function(){return k.m(h,y)};switch(g){case m:p=D()/12;break;case c:p=D();break;case u:p=D()/3;break;case l:p=(v-b)/6048e5;break;case o:p=(v-b)/864e5;break;case n:p=v/a;break;case i:p=v/e;break;case s:p=v/t;break;default:p=v}return f?p:k.a(p)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return D[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var a=this.clone(),r=S(t,e,!0);return r&&(a.$L=r),a},y.clone=function(){return k.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),_=M.prototype;return w.prototype=_,[["$ms",r],["$s",s],["$m",i],["$H",n],["$W",o],["$M",c],["$y",m],["$D",d]].forEach((function(t){_[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,M,w),t.$i=!0),w},w.locale=S,w.isDayjs=$,w.unix=function(t){return w(1e3*t)},w.en=D[v],w.Ls=D,w.p={},w}))}}]);
//# sourceMappingURL=84.f7d554a5.js.map