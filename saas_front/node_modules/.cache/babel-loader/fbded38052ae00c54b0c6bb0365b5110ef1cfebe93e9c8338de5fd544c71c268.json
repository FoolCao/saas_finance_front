{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport dayjs from \"dayjs\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      tabPosition: 'left',\n      accountBooksList: [],\n      dialogFormVisible: false,\n      isTrueOrFalse: false,\n      formData: {\n        id: '',\n        bookName: '',\n        contactPerson: '',\n        contactPhoneNum: '',\n        varType: '',\n        created: '',\n        state: ''\n      },\n      updateformData: {\n        id: '',\n        bookName: '',\n        contactPerson: '',\n        contactPhoneNum: '',\n        varType: '',\n        end: '',\n        state: ''\n      },\n      role: '',\n      show: false\n    };\n  },\n  created() {\n    this.getList();\n    this.role = localStorage.getItem('role');\n    this.storeId = localStorage.getItem('storeId');\n  },\n  methods: {\n    async getList() {\n      const res = await axios({\n        method: \"get\",\n        url: \"http://localhost:8081/account/page\"\n      });\n      // 遍历返回的数据，将 createTime 和 endTime 转换为指定格式的日期时间字符串\n      this.accountBooksList = res.data.data.map(item => {\n        item.created = dayjs(item.created).format('YYYY-MM-DD HH:mm:ss');\n        if (item.end) {\n          item.end = dayjs(item.end).format('YYYY-MM-DD HH:mm:ss');\n        } else {\n          item.end = ''; // 如果 endTime 为空，则赋空值\n        }\n        return item;\n      });\n    },\n    viewAccountDetails(id, bookName) {\n      // 存储具体某个账套的bookID到localStorage\n      localStorage.setItem(\"bookID\", id);\n      localStorage.setItem(\"bookName\", bookName);\n      // 这里可以跳转到具体账套的详细信息页面或执行其他操作\n      // 示例：跳转到名为'/accountDetails'的路由\n      this.$router.push('/home');\n    },\n    // 打开新增弹窗，\n    addOpen() {\n      // 打开弹窗\n      this.dialogFormVisible = true;\n      // 记录状态\n      // 重置formData\n      this.formData = {\n        id: '',\n        bookName: '',\n        contactPerson: '',\n        contactPhoneNum: '',\n        varType: ''\n      };\n    },\n    updateOpen(item) {\n      this.show = true;\n      this.updateformData = {\n        ...item\n      };\n    },\n    async update() {\n      const data = {\n        ...this.updateformData\n      };\n      if (this.updateformData.state === '禁用') {\n        data.end = new Date();\n        data.state = '禁用';\n      } else {\n        data.end = null;\n        data.state = '启用';\n      }\n      const res = await axios({\n        url: \"http://localhost:8081/account/update\",\n        method: 'post',\n        data: data\n      });\n      this.show = false;\n      this.getList();\n    },\n    async submit() {\n      // 拷贝formData到data\n      const data = {\n        ...this.formData,\n        // 添加其他字段\n        created: new Date(),\n        end: null,\n        storeId: localStorage.getItem('storeId'),\n        state: '启用'\n      };\n      const res = await axios({\n        url: \"http://localhost:8081/account/add\",\n        method: 'post',\n        data: data\n      });\n      this.dialogFormVisible = false;\n      this.getList();\n    }\n  }\n};","map":{"version":3,"names":["dayjs","axios","data","tabPosition","accountBooksList","dialogFormVisible","isTrueOrFalse","formData","id","bookName","contactPerson","contactPhoneNum","varType","created","state","updateformData","end","role","show","getList","localStorage","getItem","storeId","methods","res","method","url","map","item","format","viewAccountDetails","setItem","$router","push","addOpen","updateOpen","update","Date","submit"],"sources":["src/views/accountBooks/FinanceAccountBooks.vue"],"sourcesContent":["<template>\r\n    <el-card>\r\n        <div class=\"sidebar\">\r\n            <el-tabs :tab-position=\"tabPosition\" style=\"height: auto;\">\r\n                <el-tab-pane label=\"账套管理\">\r\n                    <!-- title -->\r\n                    <el-card style=\"text-align:center\">\r\n                        <span\r\n                            style=\"font-size: 24px;font-weight: bold;font-family: 'Times New Roman', Times, serif;\">账套管理</span>\r\n                    </el-card>\r\n                    <!-- 操作按钮 -->\r\n                    <el-card style=\"margin-top: 20px\">\r\n                        <span\r\n                            style=\"font-size: 16px; font-weight: bold; font-family: 'Times New Roman', Times, serif;\">账套管理</span>\r\n                        <!-- 使用 v-if 判断 role 的内容，如果是老板则不显示新增按钮 -->\r\n                        <el-button style=\"margin-left: 20px\" @click=\"addOpen\">新增账套</el-button>\r\n                    </el-card>\r\n                    <!-- 账套区域 -->\r\n                    <el-row>\r\n                        <el-col v-for=\"item in accountBooksList\" :span=\"8\">\r\n                            <el-card>\r\n                                <div slot=\"header\" class=\"clearfix\">\r\n                                    <span>{{ item.bookName }}</span>\r\n                                    <el-button style=\"margin-left: 20px\" v-if=\"item.state === '启用'\" type=\"text\"\r\n                                        @click=\"updateOpen(item)\">\r\n                                        修改账套\r\n                                    </el-button>\r\n                                    <el-button style=\"margin-left: 20px\" type=\"text\"\r\n                                        @click=\"viewAccountDetails(item.id, item.bookName)\">\r\n                                        进入账套\r\n                                    </el-button>\r\n                                </div>\r\n                                <p style=\"margin-top:10px\">账套名称：{{ item.bookName }}</p>\r\n                                <p style=\"margin-top:20px\">纳税类型：{{ item.varType }}</p>\r\n                                <p style=\"margin-top:20px\">启用时间：{{ item.created }}</p>\r\n                                <p style=\"margin-top:20px\">禁用时间：{{ item.end }}</p>\r\n                            </el-card>\r\n                        </el-col>\r\n                    </el-row>\r\n\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"员工管理\">员工管理</el-tab-pane>\r\n                <el-tab-pane label=\"部门管理\">部门管理</el-tab-pane>\r\n                <el-tab-pane label=\"角色管理\">角色管理</el-tab-pane>\r\n                <el-tab-pane label=\"权限管理\">权限管理</el-tab-pane>\r\n                <el-tab-pane label=\"操作日志\">操作日志</el-tab-pane>\r\n            </el-tabs>\r\n\r\n            <!-- 新增弹窗区域 -->\r\n            <el-dialog title=\"新增账套具体信息\" :visible.sync=\"dialogFormVisible\">\r\n                <el-form :model=\"formData\" class=\"demo-form-inline\" label-width=\"120px\">\r\n                    <el-form-item label=\"账套名称\">\r\n                        <el-input v-model=\"formData.bookName\" placeholder=\"账套名称\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"联系人\">\r\n                        <el-input v-model=\"formData.contactPerson\" placeholder=\"联系人\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"联系人电话\">\r\n                        <el-input v-model=\"formData.contactPhoneNumber\" placeholder=\"联系人电话\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"纳税类型\">\r\n                        <el-select v-model=\"formData.varType\" placeholder=\"请选择纳税类型\">\r\n                            <el-option label=\"一般纳税人\" value=\"一般纳税人\"></el-option>\r\n                            <el-option label=\"小规模纳税人\" value=\"小规模纳税人\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button @click=\"submit\">提交</el-button>\r\n                    </el-form-item>\r\n\r\n                </el-form>\r\n            </el-dialog>\r\n\r\n            <!-- 修改弹窗区域 -->\r\n            <el-dialog title=\"修改账套信息\" :visible.sync=\"show\">\r\n                <el-form :model=\"updateformData\" class=\"demo-form-inline\" label-width=\"120px\">\r\n\r\n                    <el-form-item label=\"账套名称\">\r\n                        <el-input v-model=\"updateformData.bookName\" placeholder=\"账套名称\"></el-input>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"联系人\">\r\n                        <el-input v-model=\"updateformData.contactPerson\" placeholder=\"单位名称\"></el-input>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"联系人电话\">\r\n                        <el-input v-model=\"updateformData.contactPhoneNum\" placeholder=\"联系人电话\"></el-input>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"纳税类型\">\r\n                        <el-select v-model=\"updateformData.varType\" placeholder=\"请选择纳税类型\">\r\n                            <el-option label=\"一般纳税人\" value=\"一般纳税人\"></el-option>\r\n                            <el-option label=\"小企业会计准则\" value=\"小企业会计准则\"></el-option>\r\n                            <el-option label=\"小规模纳税人\" value=\"小规模纳税人\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"是否禁用\">\r\n                        <el-select v-model=\"updateformData.state\" placeholder=\"\">\r\n                            <el-option label=\"禁用\" value=\"禁用\"></el-option>\r\n                            <el-option label=\"启用\" value=\"启用\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item>\r\n                        <el-button @click=\"update\">提交</el-button>\r\n                    </el-form-item>\r\n\r\n                </el-form>\r\n            </el-dialog>\r\n\r\n        </div>\r\n    </el-card>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport dayjs from \"dayjs\";\r\nimport axios from \"axios\";\r\nexport default {\r\n\r\n    data() {\r\n        return {\r\n            tabPosition: 'left',\r\n            accountBooksList: [],\r\n            dialogFormVisible: false,\r\n            isTrueOrFalse: false,\r\n            formData: {\r\n                id: '',\r\n                bookName: '',\r\n                contactPerson: '',\r\n                contactPhoneNum: '',\r\n                varType: '',\r\n                created: '',\r\n                state: ''\r\n            },\r\n            updateformData: {\r\n                id: '',\r\n                bookName: '',\r\n                contactPerson: '',\r\n                contactPhoneNum: '',\r\n                varType: '',\r\n                end: '',\r\n                state: ''\r\n            },\r\n            role: '',\r\n            show: false\r\n        };\r\n    },\r\n    created() {\r\n        this.getList();\r\n        this.role = localStorage.getItem('role');\r\n        this.storeId = localStorage.getItem('storeId');\r\n    },\r\n    methods: {\r\n        async getList() {\r\n            const res = await axios({\r\n                method: \"get\",\r\n                url: \"http://localhost:8081/account/page\",\r\n            });\r\n            // 遍历返回的数据，将 createTime 和 endTime 转换为指定格式的日期时间字符串\r\n            this.accountBooksList = res.data.data.map(item => {\r\n                item.created = dayjs(item.created).format('YYYY-MM-DD HH:mm:ss');\r\n                if (item.end) {\r\n                    item.end = dayjs(item.end).format('YYYY-MM-DD HH:mm:ss');\r\n                } else {\r\n                    item.end = ''; // 如果 endTime 为空，则赋空值\r\n                }\r\n                return item;\r\n            });\r\n        },\r\n\r\n        viewAccountDetails(id, bookName) {\r\n            // 存储具体某个账套的bookID到localStorage\r\n            localStorage.setItem(\"bookID\", id);\r\n            localStorage.setItem(\"bookName\", bookName);\r\n            // 这里可以跳转到具体账套的详细信息页面或执行其他操作\r\n            // 示例：跳转到名为'/accountDetails'的路由\r\n            this.$router.push('/home');\r\n        },\r\n\r\n        // 打开新增弹窗，\r\n        addOpen() {\r\n            // 打开弹窗\r\n            this.dialogFormVisible = true\r\n            // 记录状态\r\n            // 重置formData\r\n            this.formData = {\r\n                id: '',\r\n                bookName: '',\r\n                contactPerson: '',\r\n                contactPhoneNum: '',\r\n                varType: '',\r\n            }\r\n        },\r\n        updateOpen(item) {\r\n            this.show = true\r\n            this.updateformData = { ...item }\r\n        },\r\n\r\n        async update() {\r\n\r\n            const data = {\r\n                ...this.updateformData,\r\n\r\n            };\r\n            if (this.updateformData.state === '禁用') {\r\n                data.end = new Date()\r\n                data.state = '禁用'\r\n            } else {\r\n                data.end = null\r\n                data.state = '启用'\r\n            }\r\n            const res = await axios({\r\n                url: \"http://localhost:8081/account/update\",\r\n                method: 'post',\r\n                data: data\r\n            })\r\n            this.show = false\r\n            this.getList()\r\n        },\r\n\r\n        async submit() {\r\n            // 拷贝formData到data\r\n            const data = {\r\n                ...this.formData,\r\n                // 添加其他字段\r\n                created: new Date(),\r\n                end: null,\r\n                storeId: localStorage.getItem('storeId'),\r\n                state: '启用'\r\n            }\r\n            const res = await axios({\r\n                url: \"http://localhost:8081/account/add\",\r\n                method: 'post',\r\n                data: data\r\n            })\r\n            this.dialogFormVisible = false\r\n            this.getList()\r\n        },\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.text {\r\n    font-size: 14px;\r\n}\r\n\r\n.item {\r\n    margin-bottom: 18px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n    display: table;\r\n    content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n    clear: both\r\n}\r\n\r\n.box-card {\r\n    width: 480px;\r\n}\r\n</style>"],"mappings":";AAsHA,OAAAA,KAAA;AACA,OAAAC,KAAA;AACA;EAEAC,KAAA;IACA;MACAC,WAAA;MACAC,gBAAA;MACAC,iBAAA;MACAC,aAAA;MACAC,QAAA;QACAC,EAAA;QACAC,QAAA;QACAC,aAAA;QACAC,eAAA;QACAC,OAAA;QACAC,OAAA;QACAC,KAAA;MACA;MACAC,cAAA;QACAP,EAAA;QACAC,QAAA;QACAC,aAAA;QACAC,eAAA;QACAC,OAAA;QACAI,GAAA;QACAF,KAAA;MACA;MACAG,IAAA;MACAC,IAAA;IACA;EACA;EACAL,QAAA;IACA,KAAAM,OAAA;IACA,KAAAF,IAAA,GAAAG,YAAA,CAAAC,OAAA;IACA,KAAAC,OAAA,GAAAF,YAAA,CAAAC,OAAA;EACA;EACAE,OAAA;IACA,MAAAJ,QAAA;MACA,MAAAK,GAAA,SAAAvB,KAAA;QACAwB,MAAA;QACAC,GAAA;MACA;MACA;MACA,KAAAtB,gBAAA,GAAAoB,GAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAyB,GAAA,CAAAC,IAAA;QACAA,IAAA,CAAAf,OAAA,GAAAb,KAAA,CAAA4B,IAAA,CAAAf,OAAA,EAAAgB,MAAA;QACA,IAAAD,IAAA,CAAAZ,GAAA;UACAY,IAAA,CAAAZ,GAAA,GAAAhB,KAAA,CAAA4B,IAAA,CAAAZ,GAAA,EAAAa,MAAA;QACA;UACAD,IAAA,CAAAZ,GAAA;QACA;QACA,OAAAY,IAAA;MACA;IACA;IAEAE,mBAAAtB,EAAA,EAAAC,QAAA;MACA;MACAW,YAAA,CAAAW,OAAA,WAAAvB,EAAA;MACAY,YAAA,CAAAW,OAAA,aAAAtB,QAAA;MACA;MACA;MACA,KAAAuB,OAAA,CAAAC,IAAA;IACA;IAEA;IACAC,QAAA;MACA;MACA,KAAA7B,iBAAA;MACA;MACA;MACA,KAAAE,QAAA;QACAC,EAAA;QACAC,QAAA;QACAC,aAAA;QACAC,eAAA;QACAC,OAAA;MACA;IACA;IACAuB,WAAAP,IAAA;MACA,KAAAV,IAAA;MACA,KAAAH,cAAA;QAAA,GAAAa;MAAA;IACA;IAEA,MAAAQ,OAAA;MAEA,MAAAlC,IAAA;QACA,QAAAa;MAEA;MACA,SAAAA,cAAA,CAAAD,KAAA;QACAZ,IAAA,CAAAc,GAAA,OAAAqB,IAAA;QACAnC,IAAA,CAAAY,KAAA;MACA;QACAZ,IAAA,CAAAc,GAAA;QACAd,IAAA,CAAAY,KAAA;MACA;MACA,MAAAU,GAAA,SAAAvB,KAAA;QACAyB,GAAA;QACAD,MAAA;QACAvB,IAAA,EAAAA;MACA;MACA,KAAAgB,IAAA;MACA,KAAAC,OAAA;IACA;IAEA,MAAAmB,OAAA;MACA;MACA,MAAApC,IAAA;QACA,QAAAK,QAAA;QACA;QACAM,OAAA,MAAAwB,IAAA;QACArB,GAAA;QACAM,OAAA,EAAAF,YAAA,CAAAC,OAAA;QACAP,KAAA;MACA;MACA,MAAAU,GAAA,SAAAvB,KAAA;QACAyB,GAAA;QACAD,MAAA;QACAvB,IAAA,EAAAA;MACA;MACA,KAAAG,iBAAA;MACA,KAAAc,OAAA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}